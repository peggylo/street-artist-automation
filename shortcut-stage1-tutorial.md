# 階段 1：下載 PDF 和圖片

## 🎯 測試目標

確保 Shortcut 能同時下載 PDF 和圖片到 iCloud Drive，且圖片不會跑到相簿

**預估時間**：20 分鐘

---

## 📝 重點說明

這個階段要測試：
- 下載兩個不同類型的檔案（PDF + 圖片）
- 確保圖片儲存在 iCloud Drive，**不是相簿**
- 確認檔案順序（PDF 在前、圖片在後）
- 測試兩次語音提示

---

## 📱 修改現有的 Shortcut

### 步驟 1：開啟「測試下載PDF」

1. 在 Shortcut App 中
2. 找到「測試下載PDF」
3. 點擊進入編輯模式

---

### 步驟 2：重新命名 Shortcut

1. 點擊上方的「測試下載PDF」文字
2. 改為：`測試雙檔案下載`
3. 點擊「完成」

---

## 🔧 擴充動作（從 5 個變成 10 個）

目前已有的 5 個動作：
1. 文字（PDF 連結）
2. 取得 URL 的內容
3. 儲存檔案
4. 朗讀文字
5. 顯示通知

現在要加入第二組（下載圖片），共 5 個新動作：

---

### 動作 6：文字（放圖片連結）

1. 滑到最下方，點擊搜尋框
2. 搜尋：`文字`
3. 點選「文字」動作
4. 在文字框中輸入以下連結（完整複製）：

```
https://drive.google.com/uc?export=download&id=***REMOVED***
```

---

### 動作 7：取得 URL 的內容

1. 搜尋：`取得 URL`
2. 點選「取得 URL 的內容」動作
3. 這個動作會自動連接上一步的文字

---

### 動作 8：儲存檔案（圖片）

1. 搜尋：`儲存檔案`
2. 點選「儲存檔案」動作
3. 點擊「儲存檔案」展開設定：
   - **詢問儲存位置**：關閉
   - **覆寫已存在的檔案**：開啟
   - **目的地**：`iCloud Drive`（根目錄）
4. 點擊「完成」

> **重要**：不要選擇「照片」！必須是 iCloud Drive，這樣圖片才不會跑到相簿。

---

### 動作 9：朗讀文字（第二次語音提示）

1. 搜尋：`朗讀文字`
2. 點選「朗讀文字」動作
3. 在文字框輸入：`街頭藝人證下載完成`

---

### 動作 10：顯示通知（第二次視覺提示）

1. 搜尋：`顯示通知`
2. 點選「顯示通知」動作
3. 在文字框輸入：`兩個檔案都下載好了`

---

## 📋 檢查完整流程

現在你的 Shortcut 應該有 10 個動作，分成兩組：

**第一組：下載 PDF**
1. 文字（PDF 連結）
2. 取得 URL 的內容
3. 儲存檔案 → iCloud Drive
4. 朗讀文字：「PDF 下載完成」
5. 顯示通知：「檔案已存到下載項目」

**第二組：下載圖片**
6. 文字（圖片連結）
7. 取得 URL 的內容
8. 儲存檔案 → iCloud Drive
9. 朗讀文字：「街頭藝人證下載完成」
10. 顯示通知：「兩個檔案都下載好了」

---

## ✅ 完成設定

1. 確認所有動作都正確
2. 點擊右上角「完成」
3. Shortcut 準備執行！

---

## 🚀 執行測試

### 執行 Shortcut

1. 在「我的捷徑」頁面找到「測試雙檔案下載」
2. 點擊執行
3. 等待完成（約 5-8 秒）

### 預期結果

執行過程中會聽到：
1. 第一次語音：「PDF 下載完成」
2. 第一次通知：「檔案已存到下載項目」
3. 第二次語音：「街頭藝人證下載完成」
4. 第二次通知：「兩個檔案都下載好了」

---

## 🔍 確認結果

### 1. 檢查檔案是否都下載成功

1. 開啟「檔案」App
2. 點擊「瀏覽」→ `iCloud Drive`
3. 應該會看到**兩個檔案**在根目錄中：
   - 一個 PDF（申請表）
   - 一個圖片（街頭藝人證）

### 2. 確認圖片沒有跑到相簿

1. 開啟「照片」App
2. 查看「最近項目」
3. **不應該**看到剛剛下載的街頭藝人證圖片

> **如果圖片出現在相簿**：表示動作 8 的設定錯誤，需要重新設定為 iCloud Drive。

### 3. 確認檔案順序

1. 在「檔案」App 中，點擊右上角的排序按鈕
2. 選擇「依日期排序」
3. 確認 **PDF 在上方**（最新）、**圖片在下方**（次新）

> **為什麼順序重要？**  
> 因為媽媽上傳檔案時，會依照「下載項目」的順序，需要先上傳 PDF、再上傳圖片。

---

## ✅ 驗收標準

確認以下四點都達成：

- [ ] **兩個檔案都成功下載**：PDF 和圖片都在 iCloud Drive
- [ ] **圖片儲存在 iCloud Drive**：圖片沒有出現在「照片」App
- [ ] **檔案順序正確**：在「檔案」App 中，PDF 在圖片之前
- [ ] **聽到兩次語音提示**：「PDF 下載完成」和「街頭藝人證下載完成」

---

## ❓ 常見問題

### Q1：圖片跑到相簿了怎麼辦？

**原因**：動作 8 的儲存位置設定錯誤

**解決方式**：
1. 編輯 Shortcut
2. 找到動作 8（第二個「儲存檔案」）
3. 點擊展開設定
4. 確認目的地是 `iCloud Drive`（根目錄），不是「照片」
5. 重新執行測試

---

### Q2：只下載了一個檔案

**原因**：第二組動作可能沒有正確加入

**解決方式**：
1. 檢查 Shortcut 是否有 10 個動作
2. 確認動作 6-10 都已加入
3. 特別檢查動作 6（第二個文字）的連結是否正確

---

### Q3：檔案順序相反（圖片在 PDF 前面）

**原因**：動作執行順序錯誤

**解決方式**：
1. 編輯 Shortcut
2. 確認動作 1-5（PDF）在上方
3. 確認動作 6-10（圖片）在下方
4. 如果順序錯了，長按動作可以拖曳重新排序

---

### Q4：語音提示只聽到一次

**原因**：可能是第二個「朗讀文字」沒有加入

**解決方式**：
1. 檢查動作 9 是否存在
2. 確認文字內容是「街頭藝人證下載完成」
3. 重新執行測試

---

## ⚠️ 已知問題

### 檔案名稱顯示為亂碼

**現象**：下載的 PDF 和圖片檔案名稱可能顯示為亂碼或無意義的字串

**影響**：
- 不影響檔案內容，檔案可正常開啟和使用
- 不影響後續上傳功能
- 這是 Google Drive 直接下載連結的已知問題

**處理方式**：
- 目前先不處理，待後續階段統一解決
- 可以透過檔案內容、類型或建立時間來辨識檔案
- 由於檔案順序正確（PDF 先、圖片後），上傳時不會混淆

---

## 🎉 完成階段 1！

恭喜！你已經成功：
- ✅ 擴充 Shortcut 到 10 個動作
- ✅ 同時下載 PDF 和圖片
- ✅ 確保圖片不會跑到相簿
- ✅ 確認檔案下載順序正確

---

## 📋 下一步：階段 2

完成這個測試後，下一階段會：
- 新增「開啟 URL」動作
- Safari 自動開啟松菸網站首頁
- 加入語音提示

---

## 💡 額外提示

### 清理測試檔案

測試完成後，可以刪除下載的檔案：
1. 開啟「檔案」App
2. 進入 `iCloud Drive` 根目錄
3. 長按檔案 → 選擇「刪除」

### 保留這個 Shortcut

建議保留「測試雙檔案下載」Shortcut：
- 可以用來快速測試下載功能
- 之後如果有問題可以回來對比
- 階段 2 會基於這個版本繼續修改

---

**建立日期**：2025年11月15日  
**測試檔案**：申請表 PDF + 街頭藝人證圖片  
**狀態**：階段 1 - 雙檔案下載測試

